<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

	<!-- Necesarios en todos los html para utilizar boostrap y jquery -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
	<script th:src="@{/js/jquery.js}"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
	<script	src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
	<link href="../css/style.css" rel="stylesheet" th:href="@{/css/style.css}" />
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>

</head>
<p style="margin-top: 110px"></p>
<nav class="navbar navbar-expand-lg navbar-light fixed-top col" style="background-color: #17b978;">
  <a class="navbar-brand" href="#"><img alt="" src="http://mesaverdemercados.com/wp-content/uploads/2019/11/cropped-logo-mesa-verde-sin-fondo-e1573756199615-2-129x95.png" width="100px" height="70px"></a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNavDropdown">
    <ul class="navbar-nav">
      <li class="nav-item active" >
        <a class="navbar-brand" href="/GestionProducto" style="font-size:25px">PRODUCTOS</a>
      </li>
      <li class="nav-item">
        <a class="navbar-brand" href="/GestionClinte" style="font-size:25px">CLIENTES</a>
      </li>
       <li class="nav-item">
        <a class="navbar-brand" href="/GestionVendedor" style="font-size:25px">VENDEDORES</a>
      </li>
      <li class="nav-item dropdown">
        <a class="navbar-brand dropdown-toggle"  href="/GestionCategoria" data-toggle="dropdown"style="font-size:25px">CAT/SUB</a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="/GestionCategoria">CATEGORIA</a>
          <a class="dropdown-item" href="/GestionSubcategoria">SUBCATEGORIA</a>
        </div>
      </li>
      <li class="nav-item">
        <a class="navbar-brand" href="/GestionProvedor" style="font-size:25px">PROVEEDORES</a>
      </li>
    </ul>
  </div>
</nav>
<body>
  <form class="formulario" action="#" th:action="@{/Subcategoria}" th:object="${subcategoria}" method="post">
<hr>
	
		<div class="container-fluid" >
			<p class="text-center " style="font-size:30px">GESTION DE SUBCATEGORIAS</p>
    	</div>
    	<div style="background-color: #eeef20"  ><br></div>
    	<br>
			<div class="Container">
				<div class="row" style="margin: 10px">
					<div class="col" >
						<label class="font-weight-bold">NOMBRE</label>
						<input class="form-control" type="text" placeholder="INGRESE EL NOMBRE DE LA CATEGORIA" th:field="*{nombre}" th:value="${subcategoria.nombre}" required="required">
					</div>
					
					<div class="col">
						<label class="font-weight-bold">DESCRIPCION</label><!-- La etiqueta th:value me trae la busqueda y me la carga al campo de texto -->
						<input class="form-control" type="text" placeholder="INGRESE LA DESCRIPCION DE LA CATEGORIA" th:field="*{descripcion}" th:value="${subcategoria.descripcion}"> 
					</div>
					<div class="col">
						<label class="font-weight-bold">Categoria</label>
						<select class="form-control"  th:field="*{categoria.idCategoria}" >
							<option   th:each="cat : ${cantegorias}" th:text="${cat.nombre}" th:value="${cat.idCategoria}"></option>
						</select>
					</div>
				</div>
			    		<hr>				
		
			</div>
			<div class="container-fluid " >
				<div class="container d-flex justify-content-center" >
					<button type="submit" class="btn btn-outline-dark btn-lg mr-2"  value="Registrar" name="Registrar" id="btnCancelar">REGISTRAR</button>
					<button type="submit" class="btn btn-outline-dark btn-lg mr-2"  value="Buscar" name="Buscar" id="btnCancelar">BUSCAR</button>				
					<button type="submit" class="btn btn-outline-dark btn-lg mr-2"  value="Modificar" name="Modificar" id="btnCancelar">MODIFICAR</button>		
					<button type="submit" class="btn btn-outline-dark btn-lg mr-2"  value="Eliminar" name="Eliminar" id="btnCancelar">ELIMINAR</button>		
				</div>
		
		</div>
		<hr>
		
		<div class="container" th:switch="${subcantegorias}">
		  <h2 class="text-center">LISTADO DE SUBCATEGORIAS</h2>
		  <p class="text-center">Las siguientes items en la lista son las subcategorias usadas en los productos</p>            
		  <table class="table table-hover">
		    <thead style="background-color: #eeef20">
		      <tr>
		        <th class="text-center">ID</th>
		        <th class="text-center">NOMBRE</th>
		        <th class="text-center">DESCRIPCION</th>
		        <th class="text-center">NOMBRE CATEGORIA</th>
		      </tr>
		    </thead>
		    <tbody>
		      <tr th:each="subcat : ${subcantegorias}">
		        <td th:text="${subcat.idSubcategoria}">John</td>
		        <td th:text="${subcat.nombre}">John</td>
		        <td th:text="${subcat.descripcion}">John</td>
		        <td th:text="${subcat.categoria.nombre}">John</td>
		      </tr>
		    </tbody>
		  </table>
		</div>
	</form>

	

</body>

<script th:src="@{/js/jquery.js}"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
		integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
		crossorigin="anonymous"></script>
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
		integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
		crossorigin="anonymous"></script>
		
		<script th:inline="javascript">
		$(function() {
						$('#subcategorias').load('/ajax/subcategorias', "id_categoria="+$('#categoria').val());
						$('#categoria').on('change', function() {
							$('#subcategorias').load('/ajax/subcategorias', 'id_categoria='+$('#categoria').val());
						});
					});
	
		</script>
</html>